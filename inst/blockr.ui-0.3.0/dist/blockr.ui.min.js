var t=()=>{Shiny.addCustomMessageHandler("bind-network-keyboard-shortcuts",e=>{let i=HTMLWidgets.find(e.id).network;$(document).on("keydown",d=>{d.shiftKey&&d.keyCode==69&&(i.addEdgeMode(),$("button.vis-back").hide(),$(".vis-separator-line").hide())}),$(document).on("keydown",d=>{d.key==="Escape"&&(i.disableEditMode(),i.enableEditMode(),$(".vis-close").hide(),$(".vis-edit").hide(),$(".vis-separator-line").hide())})})};var s=()=>{Shiny.addCustomMessageHandler("hide-vis-dropdown",e=>{$(e).css("visibility","hidden")}),Shiny.addCustomMessageHandler("toggle-manipulation-ui",e=>{$(".vis-close").hide(),$(".vis-edit").hide(),$(".vis-separator-line").hide(),e.value?$(".vis-manipulation").show():$(".vis-manipulation").hide()}),Shiny.addCustomMessageHandler("hide-sidebars-toggles",e=>{$(`button[aria-controls="${e.ns}-dashboard"]`).css("visibility","hidden"),$(`button[aria-controls="${e.ns}-properties"]`).css("visibility","hidden")})};var r=e=>{var i=HTMLWidgets.find("#"+e),d;return typeof i<"u"&&(d=i.getWidget()),d},o=()=>{Shiny.addCustomMessageHandler("add-grid-widget",e=>{var i=r(e.id);typeof i<"u"&&(e.data.content=`<div
              id="grid-stack-item-content-${e.data.id}"
              class="bg-white p-2 border rounded-4">
            </div>`,i.addWidget(e.data),$(`#grid-stack-item-content-${e.data.id}`).append($(`#${e.data.id}`)),$(`#${e.data.id}`).is(":hidden")&&$(`#${e.data.id}`).show())}),Shiny.addCustomMessageHandler("move-widget-to-sidebar",e=>{$(e.id).append($(e.block_id))}),Shiny.addCustomMessageHandler("update-grid-zoom",e=>{$(e.id).css("zoom",e.zoom)})};var l=(e,i)=>{let d={x:i.clientX,y:i.clientY};Shiny.setInputValue(e,d,{priority:"event"})},a=()=>{Shiny.addCustomMessageHandler("capture-mouse-position",e=>{document.addEventListener("contextmenu",i=>{l(e,i)})}),$("body").click(e=>{$(e.target).closest(".node-menu-card").length===0&&$(".node-menu-card").hide()}),Shiny.addCustomMessageHandler("show-node-menu",e=>{if($(`#${e.id}`).length===0){let i=e.id.split(e.ns)[1],d=`<div class="card node-menu-card" style="width: 18rem; position: absolute;" id="${e.id}">
              <div class="card-header"><h5 class="card-title">Block ${i} options</h5></div>
              <div class="card-body">
                <div class="bslib-input-switch form-switch form-check">
                  <input 
                    id="${e.id}-add_to_grid"
                    class="form-check-input"
                    type="checkbox"
                    role="switch">
                  <label class="form-check-label" for="${e.id}-add_to_grid">
                    <span>Use in dashboard?</span>
                  </label>
                </div>
                <div class="btn-group btn-group-sm d-flex justify-content-center align-items-center" role="group">
                  <button class="btn action-button btn-light" id="${e.id}-append_block" type="button">
                    <i class="fas fa-circle-plus" role="presentation" aria-label="circle-plus icon"></i>
                  </button>
                  <button class="btn action-button btn-danger" id="${e.id}-remove_block" type="button">
                    <i class="fas fa-trash" role="presentation" aria-label="trash icon"></i>
                  </button>
                </div>
              </div>
            </div>`;$("body").append(d),e.value&&$(`#${e.id}-add_to_grid`).attr("checked",""),$(`#${e.id} .btn-group`).click(()=>{$(".node-menu-card").hide()}),Shiny.bindAll($(`#${e.id}`))}$(`#${e.id}`).show().css({top:e.coords.y,left:e.coords.x})})};var n=()=>{Shiny.addCustomMessageHandler("toggle-view",e=>{e.val?($(e.id).parent(".bslib-sidebar-layout").css("--_sidebar-width","100%"),$(e.id).css("border-left","none")):($(e.id).parent(".bslib-sidebar-layout").css("--_sidebar-width","75%"),$(e.id).css("border-left","var(--_vert-border)"))})};$(function(){t(),s(),o(),a(),n()});
