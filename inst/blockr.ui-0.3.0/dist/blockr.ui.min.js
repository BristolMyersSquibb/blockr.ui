var e=()=>{Shiny.addCustomMessageHandler("bind-network-keyboard-shortcuts",d=>{let i=HTMLWidgets.find(d.id).network;$(document).on("keydown",t=>{t.shiftKey&&t.keyCode==69&&(i.addEdgeMode(),$("button.vis-back").hide(),$(".vis-separator-line").hide())}),$(document).on("keydown",t=>{t.key==="Escape"&&(i.disableEditMode(),i.enableEditMode(),$(".vis-close").hide(),$(".vis-edit").hide(),$(".vis-separator-line").hide())})})};var a=()=>{Shiny.addCustomMessageHandler("hide-vis-dropdown",d=>{$(d).css("visibility","hidden")}),Shiny.addCustomMessageHandler("toggle-manipulation-ui",d=>{$(".vis-close").hide(),$(".vis-edit").hide(),$(".vis-separator-line").hide(),d.value?$(".vis-manipulation").show():$(".vis-manipulation").hide()}),Shiny.addCustomMessageHandler("hide-sidebars-toggles",d=>{$(`button[aria-controls="${d.ns}-dashboard"]`).css("visibility","hidden"),$(`button[aria-controls="${d.ns}-properties"]`).css("visibility","hidden")})};var n=d=>{var i=HTMLWidgets.find("#"+d),t;return typeof i<"u"&&(t=i.getWidget()),t},s=()=>{Shiny.addCustomMessageHandler("add-grid-widget",d=>{var i=n(d.id);typeof i<"u"&&(d.data.content=`<div
              id="grid-stack-item-content-${d.data.id}"
              class="bg-white p-2 border rounded-4">
            </div>`,i.addWidget(d.data),$(`#grid-stack-item-content-${d.data.id}`).append($(`#${d.data.id}`)),$(`#${d.data.id}`).is(":hidden")&&$(`#${d.data.id}`).show())}),Shiny.addCustomMessageHandler("move-widget-to-sidebar",d=>{$(d.id).append($(d.block_id))}),Shiny.addCustomMessageHandler("update-grid-zoom",d=>{$(d.id).css("zoom",d.zoom)})};var c=(d,i)=>{let t={x:i.clientX,y:i.clientY};Shiny.setInputValue(d,t,{priority:"event"})},o=()=>{Shiny.addCustomMessageHandler("capture-mouse-position",d=>{document.addEventListener("contextmenu",i=>{c(d,i)})}),$("body").click(d=>{$(d.target).closest(".node-menu-card").length===0&&$(".node-menu-card").hide()}),Shiny.addCustomMessageHandler("show-node-menu",d=>{if($(`#${d.id}`).length===0){let i=d.id.split(d.ns)[1],t=`<div class="card node-menu-card" style="width: 18rem; position: absolute;" id="${d.id}">
              <div class="card-header"><h5 class="card-title">Block ${i} options</h5></div>
              <div class="card-body">
                <div class="bslib-input-switch form-switch form-check">
                  <input 
                    id="${d.id}-add_to_grid"
                    class="form-check-input"
                    type="checkbox"
                    role="switch">
                  <label class="form-check-label" for="${d.id}-add_to_grid">
                    <span>Use in dashboard?</span>
                  </label>
                </div>
                <div class="btn-group btn-group-sm d-flex justify-content-center align-items-center" role="group">
                  <button class="btn action-button btn-light" id="${d.id}-append_block" type="button">
                    <i class="fas fa-circle-plus" role="presentation" aria-label="circle-plus icon"></i>
                  </button>
                  <button class="btn action-button btn-danger" id="${d.id}-remove_block" type="button">
                    <i class="fas fa-trash" role="presentation" aria-label="trash icon"></i>
                  </button>
                </div>
              </div>
            </div>`;$("body").append(t),d.value&&$(`#${d.id}-add_to_grid`).attr("checked",""),$(`#${d.id} .btn-group`).click(()=>{$(".node-menu-card").hide()}),Shiny.bindAll($(`#${d.id}`))}$(`#${d.id}`).show().css({top:d.coords.y,left:d.coords.x})})};var l=()=>{Shiny.addCustomMessageHandler("toggle-view",d=>{d.val?($(d.id).parent(".bslib-sidebar-layout").css("--_sidebar-width","100%"),$(d.id).css("border-left","none")):($(d.id).parent(".bslib-sidebar-layout").css("--_sidebar-width","75%"),$(d.id).css("border-left","var(--_vert-border)"))})};$(function(){e(),a(),s(),o(),l(),Shiny.addCustomMessageHandler("reset-node-selection",d=>{HTMLWidgets.find(d.id).network.unselectAll()})});
