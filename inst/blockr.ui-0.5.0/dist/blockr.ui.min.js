var i=()=>{Shiny.addCustomMessageHandler("bind-network-keyboard-shortcuts",d=>{let t=HTMLWidgets.find(d.id).network;$(document).on("keydown",e=>{e.shiftKey&&e.keyCode==69&&(t.addEdgeMode(),$("button.vis-back").hide(),$(".vis-separator-line").hide())}),$(document).on("keydown",e=>{e.key==="Escape"&&(t.disableEditMode(),t.enableEditMode(),$(".vis-close").hide(),$(".vis-edit").hide(),$(".vis-separator-line").hide())})})};var a=()=>{Shiny.addCustomMessageHandler("hide-vis-dropdown",d=>{$(d).css("visibility","hidden")}),Shiny.addCustomMessageHandler("toggle-manipulation-ui",d=>{$(".vis-close").hide(),$(".vis-edit").hide(),$(".vis-separator-line").hide(),d.value?$(".vis-manipulation").show():$(".vis-manipulation").hide()}),Shiny.addCustomMessageHandler("hide-sidebars-toggles",d=>{$(`button[aria-controls="${d.ns}-dashboard"]`).css("visibility","hidden"),$(`button[aria-controls="${d.ns}-properties"]`).css("visibility","hidden")})};var b=d=>{var t=HTMLWidgets.find("#"+d),e;return typeof t<"u"&&(e=t.getWidget()),e},o=()=>{Shiny.addCustomMessageHandler("add-grid-widget",d=>{var t=b(d.id);typeof t<"u"&&(d.data.content=`<div
              id="grid-stack-item-content-${d.data.id}"
              class="bg-white p-2 border rounded-4">
            </div>`,t.addWidget(d.data),$(`#grid-stack-item-content-${d.data.id}`).append($(`#${d.data.id}`)),$(`#${d.data.id}`).is(":hidden")&&$(`#${d.data.id}`).show())}),Shiny.addCustomMessageHandler("move-widget-to-sidebar",d=>{$(d.id).append($(d.block_id))}),Shiny.addCustomMessageHandler("update-grid-zoom",d=>{$(d.id).css("zoom",d.zoom)}),Shiny.addCustomMessageHandler("move-block-in-dock",d=>{HTMLWidgets.find(d.dock_id).getWidget().getPanel(d.panel_id).api.setActive(),$(`${d.dock_id}-${d.panel_id}`).append($(d.block_id)),$(d.block_id).is(":hidden")&&$(d.block_id).show()}),Shiny.addCustomMessageHandler("remove-block-from-dock",d=>{HTMLWidgets.find(d.dock_id).getWidget().getPanel(d.panel_id).api.setActive(),$(d.id).append($(`${d.dock_id}-${d.panel_id} > * `))})};var r=(d,t)=>{let e={x:t.clientX,y:t.clientY};Shiny.setInputValue(d,e,{priority:"event"})},s=()=>{Shiny.addCustomMessageHandler("capture-mouse-position",d=>{document.addEventListener("contextmenu",t=>{r(d,t)})}),$("body").click(d=>{$(d.target).closest(".node-menu-card").length===0&&$(".node-menu-card").hide()}),Shiny.addCustomMessageHandler("show-node-menu",d=>{if($(`#${d.id}`).length===0){let n=d.id.split(d.ns)[1],c=`<div class="card node-menu-card" style="width: 18rem; position: absolute;" id="${d.id}">
              <div class="card-header"><h5 class="card-title">Block ${n} options</h5></div>
              <div class="card-body">
                <div class="d-grid gap-2 mx-auto">
                  <div class="bslib-input-switch form-switch form-check">
                    <input 
                      id="${d.id}-add_to_grid"
                      class="form-check-input"
                      type="checkbox"
                      role="switch">
                    <label class="form-check-label" for="${d.id}-add_to_grid">
                      <span>Use in dashboard?</span>
                    </label>
                  </div>
                  <button class="btn action-button btn-light" id="${d.id}-append_block" type="button">
                    <i class="fas fa-circle-plus" role="presentation" aria-label="circle-plus icon"></i>
                    Append block
                  </button>
                  <button class="btn action-button btn-danger" id="${d.id}-remove_block" type="button">
                    <i class="fas fa-trash" role="presentation" aria-label="trash icon"></i>
                    Remove block
                  </button>
                  <button class="btn action-button btn-light" id="${d.id}-remove_from_stack" type="button">
                    <i class="fas fa-object-ungroup" role="presentation" aria-label="object ungroup icon"></i>
                    Remove from stack
                  </button>
                  <div class="row g-3">
                    <div class="col-auto">
                      <select class="form-select" id="${d.id}-add_to_stack_selected"></select>
                    </div>
                    <div class="col-auto">
                      <button class="btn action-button btn-light" id="${d.id}-add_to_stack" type="button">
                        <i class="fas fa-object-group" role="presentation" aria-label="object group icon"></i>
                        Add to stack
                      </button>
                    </div>
                  </div>
                  
                </div>
              </div>
            </div>`;$("body").append(c),d.value&&$(`#${d.id}-add_to_grid`).attr("checked",""),$(`#${d.id} .btn-group`).click(()=>{$(".node-menu-card").hide()}),Shiny.bindAll($(`#${d.id}`))}if($(`#${d.id}-remove_from_stack`).attr("disabled",!d.has_stack),$(`#${d.id}-add_to_stack`).attr("disabled",d.has_stack||d.stacks.length===0),d.stacks.length>0){select=document.getElementById(`${d.id}-add_to_stack_selected`),$(`#${d.id}-add_to_stack_selected`).find("option").remove();for(var t=0;t<d.stacks.length;t++){var e=document.createElement("option");e.value=d.stacks[t],e.innerHTML=d.stacks[t],select.appendChild(e)}}$(`#${d.id}`).show().css({top:d.coords.y,left:d.coords.x})})};var l=()=>{Shiny.addCustomMessageHandler("toggle-view",d=>{d.val?($(d.id).parent(".bslib-sidebar-layout").css("--_sidebar-width","100%"),$(d.id).css("border-left","none")):($(d.id).parent(".bslib-sidebar-layout").css("--_sidebar-width","75%"),$(d.id).css("border-left","var(--_vert-border)"))})};$(function(){i(),a(),o(),s(),l(),Shiny.addCustomMessageHandler("reset-node-selection",d=>{HTMLWidgets.find(d.id).network.unselectAll()})});
